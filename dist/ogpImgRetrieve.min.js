/*!
 *   ogpImgRetrieve.js
 * See {@link https://github.com/dettalant/ogpImgRetrieve}
 *
 * @author dettalant
 * @version v0.1.0
 * @license MIT License
 */
var ogpImgRetrieve=function(e){"use strict";function n(e){for(var r=(new DOMParser).parseFromString(e,"text/html").head.children,t=r.length,n="",o=0;o<t;o++){var i=r[o],s=i.getAttribute("property");if(null!==s&&-1!==s.indexOf("og:image")){var a=i.getAttribute("content");if(null!==a){n=a;break}}}return n}function o(e,r,t){r instanceof HTMLImageElement?t?(r.dataset.src=e,r.classList.add("lazyload")):r.src=e:console.error("imgSrcOverwrite: 入力ElementがHTMLImageElementではない")}function r(r){if("fetch"in window)fetch(r.url).then(function(e){return e.text()}).then(function(e){return n(e)}).then(function(e){o(e,r.imgEl,r.isUseLazysizes)});else{var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=n(t.responseText);o(e,r.imgEl,r.isUseLazysizes)}},t.open("GET",r.url,!0),t.send()}}return e.run=function(e){void 0===e?console.error("ogpImgRetrieveError: run()関数には引数となるオブジェクトが必要です"):void 0===e.imgEl?console.error("ogpImgRetrieveError: run()関数の引数オブジェクトにimgElが存在しない"):void 0===e.url&&console.error("ogpImgRetrieveError: run()関数の引数オブジェクトにurlが存在しない"),r(e)},e}({});
